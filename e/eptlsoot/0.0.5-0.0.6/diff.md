# Comparing `tmp/eptlsoot-0.0.5-cp39-cp39-win_amd64.whl.zip` & `tmp/eptlsoot-0.0.6-cp39-cp39-win_amd64.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 1628730 bytes, number of entries: 20
--rw-rw-rw-  2.0 fat      468 b- defN 23-Apr-08 22:08 eptlsoot/__init__.py
+Zip file size: 1713128 bytes, number of entries: 20
+-rw-rw-rw-  2.0 fat      513 b- defN 23-Apr-27 02:29 eptlsoot/__init__.py
 -rw-rw-rw-  2.0 fat  1465856 b- defN 23-Apr-05 21:26 eptlsoot/_eptlsoot.cp39-win_amd64.pyd
 -rw-rw-rw-  2.0 fat     6093 b- defN 23-Apr-05 21:43 eptlsoot/cpfr.py
 -rw-rw-rw-  2.0 fat      679 b- defN 23-Apr-05 21:38 eptlsoot/eptlsoot.py
 -rw-rw-rw-  2.0 fat      644 b- defN 23-Apr-05 21:43 eptlsoot/psr.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-05 04:38 eptlsoot/apps/__init__.py
--rw-rw-rw-  2.0 fat      580 b- defN 23-Apr-08 22:09 eptlsoot/apps/flame.py
--rw-rw-rw-  2.0 fat     1628 b- defN 23-Apr-12 01:01 eptlsoot/apps/pahgrowth.py
--rw-rw-rw-  2.0 fat     4680 b- defN 23-Apr-06 17:33 eptlsoot/apps/reactors.py
+-rw-rw-rw-  2.0 fat      882 b- defN 23-Apr-25 22:15 eptlsoot/apps/flame.py
+-rw-rw-rw-  2.0 fat     1843 b- defN 23-Apr-13 14:11 eptlsoot/apps/pahgrowth.py
+-rw-rw-rw-  2.0 fat     6921 b- defN 23-Apr-27 04:40 eptlsoot/apps/reactors.py
 -rw-rw-rw-  2.0 fat      265 b- defN 23-Apr-05 04:46 eptlsoot/apps/solutionarray.py
--rw-rw-rw-  2.0 fat     3082 b- defN 23-Apr-06 04:32 eptlsoot/apps/sootgas.py
+-rw-rw-rw-  2.0 fat     3145 b- defN 23-May-13 12:46 eptlsoot/apps/sootgas.py
 -rw-rw-rw-  2.0 fat      950 b- defN 23-Apr-05 21:55 eptlsoot/apps/sootmodels.py
 -rw-rw-rw-  2.0 fat     5993 b- defN 23-Apr-08 23:53 eptlsoot/apps/sootwrappers.py
 -rw-rw-rw-  2.0 fat      239 b- defN 23-Apr-05 21:52 eptlsoot/apps/surfacereactions.py
--rw-rw-rw-  2.0 fat  1482752 b- defN 23-Apr-12 01:11 eptlsoot/lib/_eptlsoot.cp39-win_amd64.pyd
+-rw-rw-rw-  2.0 fat  1717248 b- defN 23-May-16 23:48 eptlsoot/lib/_eptlsoot.cp39-win_amd64.pyd
 -rw-rw-rw-  2.0 fat  1468928 b- defN 23-Apr-05 21:11 eptlsoot2/_eptlsoot2.cp39-win_amd64.pyd
--rw-rw-rw-  2.0 fat      734 b- defN 23-Apr-12 01:11 eptlsoot-0.0.5.dist-info/METADATA
--rw-rw-rw-  2.0 fat      100 b- defN 23-Apr-12 01:11 eptlsoot-0.0.5.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        9 b- defN 23-Apr-12 01:11 eptlsoot-0.0.5.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1641 b- defN 23-Apr-12 01:11 eptlsoot-0.0.5.dist-info/RECORD
-20 files, 4445321 bytes uncompressed, 1626066 bytes compressed:  63.4%
+-rw-rw-rw-  2.0 fat      734 b- defN 23-May-16 23:48 eptlsoot-0.0.6.dist-info/METADATA
+-rw-rw-rw-  2.0 fat      100 b- defN 23-May-16 23:48 eptlsoot-0.0.6.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        9 b- defN 23-May-16 23:47 eptlsoot-0.0.6.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1641 b- defN 23-May-16 23:48 eptlsoot-0.0.6.dist-info/RECORD
+20 files, 4682683 bytes uncompressed, 1710464 bytes compressed:  63.5%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: eptlsoot/lib/_eptlsoot.cp39-win_amd64.pyd
 Comment: 
 
 Filename: eptlsoot2/_eptlsoot2.cp39-win_amd64.pyd
 Comment: 
 
-Filename: eptlsoot-0.0.5.dist-info/METADATA
+Filename: eptlsoot-0.0.6.dist-info/METADATA
 Comment: 
 
-Filename: eptlsoot-0.0.5.dist-info/WHEEL
+Filename: eptlsoot-0.0.6.dist-info/WHEEL
 Comment: 
 
-Filename: eptlsoot-0.0.5.dist-info/top_level.txt
+Filename: eptlsoot-0.0.6.dist-info/top_level.txt
 Comment: 
 
-Filename: eptlsoot-0.0.5.dist-info/RECORD
+Filename: eptlsoot-0.0.6.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## eptlsoot/__init__.py

```diff
@@ -1,9 +1,9 @@
 from .eptlsoot import SootModel, Reactor, ReactorSoot, FlameSolver, FlameSolverOpt
 from .cpfr import CPFR
 from .apps.sootgas import SootGas
 from .apps.sootmodels import MonodisperseSootModel
-from .apps.reactors import PlugFlowReactor, ConstantVolumeReactor, Inlet
+from .apps.reactors import PlugFlowReactor, ConstantVolumeReactor, Inlet, PerfectlyStirredReactor
 from .apps.pahgrowth import ReactDim, DimerCoal
-from .apps.flame import TempFlameSolver, TempFlameSolverOpt
+from .apps.flame import TempFlameSolver, TempFlameSolverOpt, FVSolver, FDSolver
 from .apps.sootwrappers import SootWrapper
 from .apps.solutionarray import SolutionArray
```

## eptlsoot/apps/flame.py

```diff
@@ -1,15 +1,23 @@
-from ..lib._eptlsoot import CTempFlameSolver, CTempFlameSolverOpt
+from ..lib._eptlsoot import CTempFlameSolver, CTempFlameSolverOpt, CFVSolver, CFDSolver
 
 class TempFlameSolver(CTempFlameSolver):
     def __init__(self, soot_gas, flame, grid, soot_model):
         super().__init__(soot_gas, flame, grid, soot_model)
 
 
 # class TempFlameSolverVector(CTempFlameSolverVector):
 #     def __init__(self, soot_gas, flame, grid, soot_model):
 #         super().__init__(soot_gas, flame, grid, soot_model)
 
 
 class TempFlameSolverOpt(CTempFlameSolverOpt):
     def __init__(self, soot_gas, flame, grid, soot):
-        super().__init__(soot_gas, flame, grid, soot)    
+        super().__init__(soot_gas, flame, grid, soot)   
+
+class FVSolver(CFVSolver):
+    def __init__(self, soot_gas, flame, grid, soot):
+        super().__init__(soot_gas, flame, grid, soot)
+
+class FDSolver(CFDSolver):
+    def __init__(self, soot_gas, flame, grid, soot):
+        super().__init__(soot_gas, flame, grid, soot)
```

## eptlsoot/apps/pahgrowth.py

```diff
@@ -1,8 +1,8 @@
-from ..lib._eptlsoot import CReactDim, CDimerCoal, CDimerCoalMod, CCrossLink
+from ..lib._eptlsoot import CReactDim, CDimerCoal, CDimerCoalMod, CCrossLink, CCrossLinkMod
 
 class PAHGrowthAbstract:
     def __init__(self, soot_wrapper):
         super().__init__(soot_wrapper);
 
 
     def set_precursor_names(self, precursor_list):
@@ -28,18 +28,23 @@
 
 class DimerCoal(PAHGrowthAbstract, CDimerCoal):
     serialized_name = "DimerCoalescence"
     def __init__(self, soot_wrapper):
         super().__init__(soot_wrapper);
 
 
-class DimerCoalMod(PAHGrowthAbstract, CDimerCoal):
+class DimerCoalMod(PAHGrowthAbstract, CDimerCoalMod):
     serialized_name = "DimerCoalescenceModified"
     def __init__(self, soot_wrapper):
         super().__init__(soot_wrapper);
 
 class CrossLink(PAHGrowthAbstract, CCrossLink):
     serialized_name = "CrossLinking"
     def __init__(self, soot_wrapper):
         super().__init__(soot_wrapper);
 
-PAH_GROWTH_MODELS = [ReactDim, DimerCoal, CrossLink, DimerCoalMod]
+class CrossLinkMod(PAHGrowthAbstract, CCrossLinkMod):
+    serialized_name = "CrossLinkingModified"
+    def __init__(self, soot_wrapper):
+        super().__init__(soot_wrapper);
+
+PAH_GROWTH_MODELS = [ReactDim, DimerCoal, CrossLink, DimerCoalMod, CrossLinkMod]
```

## eptlsoot/apps/reactors.py

```diff
@@ -1,8 +1,8 @@
-from ..lib._eptlsoot import CPFRSoot, CConstUVSoot
+from ..lib._eptlsoot import CPFRSoot, CConstUVSoot, CPSRSoot
 from .sootwrappers import SootWrapper
 from .sootgas import SootGas
 from scipy import integrate
 import numpy as np
 
 class ReactorAbstract:
     def __init__(self, soot_gas):
@@ -17,14 +17,16 @@
         self.solver.step();
     
     def check_soot_array(self, soot_array):
         check = False;
         if isinstance(soot_array, np.ndarray):
             if soot_array.shape == (self.soot_wrapper.soot_model.n_eqns,):
                 check = True;
+        if not check:
+            raise TypeError("Wrong inlet soot array");
         return check;
 
     @property
     def soot(self):
         return self.soot_wrapper;
 
 
@@ -49,16 +51,15 @@
         if self.check_soot_array(self.inlet.soot):
             self.T = self.inlet.T;
             self.P = self.inlet.P;
             self.set_mdot(self.inlet.mdot);
             y0 = np.hstack((0.0, self.inlet.mdot, self.inlet.T, self.inlet.Y, self.inlet.soot));
             self.solver = integrate.LSODA(fun=self.derivatives, t0=0, y0=y0, t_bound=self.max_length,
                                         first_step=self.first_step, max_step = self.max_step);
-        else:
-            raise TypeError("Wrong inlet soot array");
+            
 
     @property
     def total_carbon_flux(self) -> float:
         carbon_mass = self.soot_gas.carbon_mass() + self.soot_wrapper.soot_model.carbon_mass();
         return carbon_mass * self.mdot;
     
     @property
@@ -124,23 +125,91 @@
         self.temperature_solver_type = "energy_equation";
 
     def start(self):
         if self.check_soot_array(self.initial_soot):
             y0 = np.hstack((self.soot_gas.rho, self.soot_gas.T, self.soot_gas.Y_array, self.initial_soot));
             self.solver = integrate.LSODA(fun=self.derivatives, t0=0, y0=y0, t_bound=self.max_time,
                                         first_step=self.first_step, max_step = self.max_step);
-        else:
-            raise TypeError("Wrong inlet soot array");
 
 
     @property
     def total_carbon_mass(self) -> float:
         carbon_mass = self.soot_gas.carbon_mass() + self.soot_wrapper.soot_model.carbon_mass();
         return carbon_mass;
 
     @property
     def gas_carbon_mass(self) -> float:
         return self.soot_gas.carbon_mass();
 
     @property
     def soot_carbon_mass(self) -> float:
         return self.soot_wrapper.soot_model.carbon_mass();
+
+
+
+class PerfectlyStirredReactor(ReactorAbstract, CPSRSoot):
+    def __init__(self, soot_gas):
+        super().__init__(soot_gas);
+        self.create_soot_wrapper();
+        # Reactor pressure
+        self.P = self.soot_gas.P;
+        # Solver
+        self.solver = None;
+        # Max residence time
+        self.max_time = 100;
+        # First step
+        self.first_step = 1e-10;
+        # Max step
+        self.max_step = 1e-4;
+        # Initial soot
+        self.initial_soot = self.soot_wrapper.min_array;
+        # Temperature solver
+        self.temperature_solver_type = "isothermal";
+        # External Heat
+        self.Q_dot = 0;
+
+        self.set_star();
+        
+    def set_modt(self):
+        self.mdot = self.soot_gas.rho * self.reactor_volume / self.phy_restime;
+    
+    def check_params(self) -> bool:
+        valid = True;
+        if self.residence_time <= 0:
+            valid = False;
+            raise TypeError("Wrong residence time value!");
+        
+        if self.reactor_volume <= 0:
+            valid = False;
+            raise TypeError("Wrong reactor volume value!");            
+
+        return valid;
+
+    def start(self):
+        if self.check_soot_array(self.initial_soot) and self.check_params():
+            self.set_modt();
+            y0 = np.hstack((self.soot_gas.rho, self.soot_gas.T, self.soot_gas.Y_array, self.initial_soot));
+            self.solver = integrate.LSODA(fun=self.derivatives, t0=0, y0=y0, t_bound=self.max_time,
+                                        first_step=self.first_step, max_step = self.max_step);
+
+    @property
+    def total_carbon_flux(self) -> float:
+        carbon_mass = self.soot_gas.carbon_mass() + self.soot_wrapper.soot_model.carbon_mass();
+        return carbon_mass * self.mdot;
+    
+    @property
+    def gas_carbon_flux(self) -> float:
+        return self.soot_gas.carbon_mass() * self.mdot;
+
+    @property
+    def soot_carbon_flux(self) -> float:
+        return self.soot_wrapper.soot_model.carbon_mass() * self.mdot;
+
+
+    @property
+    def residence_time(self) -> float:
+        return self.phy_restime;
+
+    @residence_time.setter
+    def residence_time(self, residence_time):
+        self.phy_restime = residence_time;
+
```

## eptlsoot/apps/sootgas.py

```diff
@@ -94,20 +94,21 @@
                 speices_indices_dict[species] = cantera_gas.species_names.index(species);
             else:
                 raise ValueError(f"{species} does not exist in cantera gas object!");
         return speices_indices_dict;
 
         
     def carbon_mass(self):
-        MW_C = ct.Element("C").weight;
+        #MW_C = ct.Element("C").weight;
         gas = self.cantera_gas;
-        total_c_mass = 0.0;
-        for sp in gas.species_names:
-            sp_index = gas.species_names.index(sp);
-            no_c = gas.n_atoms(sp, "C");
-            total_c_mass += gas.X[sp_index]*no_c*MW_C;
+        # total_c_mass = 0.0;
+        # for sp in gas.species_names:
+        #     sp_index = gas.species_names.index(sp);
+        #     no_c = gas.n_atoms(sp, "C");
+        #     total_c_mass += gas.X[sp_index]*no_c*MW_C;
 
-        total_c_mass = total_c_mass / gas.mean_molecular_weight; #[kg C/kg gas]
-        return total_c_mass
+        # total_c_mass = total_c_mass / gas.mean_molecular_weight; #[kg C/kg gas]
+        #return total_c_mass
+        return gas.elemental_mass_fraction('C')
```

