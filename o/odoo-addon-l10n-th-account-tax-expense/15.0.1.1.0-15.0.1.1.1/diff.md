# Comparing `tmp/odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0-py3-none-any.whl.zip` & `tmp/odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 33755 bytes, number of entries: 23
--rw-r--r--  2.0 unx     3296 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/README.rst
--rw-r--r--  2.0 unx      112 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/__init__.py
--rw-r--r--  2.0 unx      713 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/__manifest__.py
--rw-r--r--  2.0 unx     3628 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/i18n/l10n_th_account_tax_expense.pot
--rw-r--r--  2.0 unx      153 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/models/__init__.py
--rw-r--r--  2.0 unx     7246 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/models/account_move.py
--rw-r--r--  2.0 unx     1816 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/models/hr_expense.py
--rw-r--r--  2.0 unx     5238 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/models/hr_expense_sheet.py
--rw-r--r--  2.0 unx       82 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      361 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/static/description/icon.png
--rw-r--r--  2.0 unx    12575 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/static/description/index.html
--rw-r--r--  2.0 unx      152 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/tests/__init__.py
--rw-r--r--  2.0 unx     3830 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_tax_invoice.py
--rw-r--r--  2.0 unx     9581 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_withholding_tax.py
--rw-r--r--  2.0 unx     5199 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/views/hr_expense_view.xml
--rw-r--r--  2.0 unx      109 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/wizard/__init__.py
--rw-r--r--  2.0 unx     1283 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register.py
--rw-r--r--  2.0 unx     1009 b- defN 23-Mar-10 07:34 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register_views.xml
--rw-r--r--  2.0 unx     4034 b- defN 23-Mar-10 07:34 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-10 07:34 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Mar-10 07:34 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2741 b- defN 23-Mar-10 07:34 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/RECORD
-23 files, 72710 bytes uncompressed, 28993 bytes compressed:  60.1%
+Zip file size: 33617 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     3296 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/README.rst
+-rw-r--r--  2.0 unx      112 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/__init__.py
+-rw-r--r--  2.0 unx      713 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/__manifest__.py
+-rw-r--r--  2.0 unx     3628 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/i18n/l10n_th_account_tax_expense.pot
+-rw-r--r--  2.0 unx      153 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/models/__init__.py
+-rw-r--r--  2.0 unx     7246 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/models/account_move.py
+-rw-r--r--  2.0 unx     1303 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/models/hr_expense.py
+-rw-r--r--  2.0 unx     5318 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/models/hr_expense_sheet.py
+-rw-r--r--  2.0 unx       82 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      361 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/static/description/icon.png
+-rw-r--r--  2.0 unx    12575 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/static/description/index.html
+-rw-r--r--  2.0 unx      152 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/tests/__init__.py
+-rw-r--r--  2.0 unx     3830 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_tax_invoice.py
+-rw-r--r--  2.0 unx     9581 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_withholding_tax.py
+-rw-r--r--  2.0 unx     5199 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/views/hr_expense_view.xml
+-rw-r--r--  2.0 unx      109 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/wizard/__init__.py
+-rw-r--r--  2.0 unx     1283 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register.py
+-rw-r--r--  2.0 unx     1009 b- defN 23-May-17 08:12 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register_views.xml
+-rw-r--r--  2.0 unx     4034 b- defN 23-May-17 08:12 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-17 08:12 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-17 08:12 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2741 b- defN 23-May-17 08:12 odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/RECORD
+23 files, 72277 bytes uncompressed, 28855 bytes compressed:  60.1%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register.py
 Comment: 
 
 Filename: odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register_views.xml
 Comment: 
 
-Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/METADATA
+Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/WHEEL
+Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/top_level.txt
+Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/RECORD
+Filename: odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_th_account_tax_expense/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2020 Ecosoft Co., Ltd (http://ecosoft.co.th/)
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html)
 
 {
     "name": "Thai Localization - Expense Tax",
-    "version": "15.0.1.1.0",
+    "version": "15.0.1.1.1",
     "author": "Ecosoft, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "website": "https://github.com/OCA/l10n-thailand",
     "category": "Localization / Accounting",
     "depends": [
         "l10n_th_account_tax",
         "hr_expense_advance_clearing",
```

## odoo/addons/l10n_th_account_tax_expense/models/hr_expense.py

```diff
@@ -34,16 +34,8 @@
         move_line_values_by_expense = super()._get_account_move_line_values()
         # Set wht_tax_id, to account move line
         for expense in self:
             wht_tax_dict = {"wht_tax_id": expense.wht_tax_id.id}
             for ml in move_line_values_by_expense[expense.id]:
                 if ml.get("product_id"):
                     ml.update(wht_tax_dict)
-        # # Set tax_exigible, to ensure that, tax inovice is not created for undue vat
-        # RepartTax = self.env["account.tax.repartition.line"]
-        # for move_lines in move_line_values_by_expense.values():
-        #     for move_line in filter(
-        #         lambda l: l.get("tax_repartition_line_id"), move_lines
-        #     ):
-        #         tax = RepartTax.browse(move_line["tax_repartition_line_id"]).tax_id
-        #         move_line["tax_exigible"] = tax.tax_exigibility == "on_invoice"
         return move_line_values_by_expense
```

## odoo/addons/l10n_th_account_tax_expense/models/hr_expense_sheet.py

```diff
@@ -48,39 +48,41 @@
         # Create wht JV
         move_vals = sheet._prepare_withholding_tax_entry()
         move = self.env["account.move"].create(move_vals)
         sheet.wht_move_id = move
         result["res_id"] = move.id
         return result
 
+    def _get_move_line_wht_vals(self, deduction, wht_move_lines):
+        return {
+            "name": deduction["name"],
+            "amount_currency": -deduction["amount"],
+            "currency_id": self.env.company.currency_id.id,
+            "debit": 0.0,
+            "credit": deduction["amount"],
+            "partner_id": deduction["partner_id"],
+            "account_id": deduction["account_id"],
+            "wht_tax_id": deduction["wht_tax_id"],
+            "tax_base_amount": deduction["wht_amount_base"],
+        }
+
     def _prepare_withholding_tax_entry(self):
         self.ensure_one()
         # Prepare Dr. Advance, Cr. WHT lines
         line_vals_list = []
         move_lines = self.account_move_id.line_ids
         # Cr. WHT Lines
         wht_move_lines = move_lines.filtered("wht_tax_id")
         currency = self.env.company.currency_id
         deduction_list, amount_deduct = wht_move_lines._prepare_deduction_list(
             currency=currency
         )
         for deduction in deduction_list:
-            line_vals_list.append(
-                {
-                    "name": deduction["name"],
-                    "amount_currency": -deduction["amount"],
-                    "currency_id": currency.id,
-                    "debit": 0.0,
-                    "credit": deduction["amount"],
-                    "partner_id": deduction["partner_id"],
-                    "account_id": deduction["account_id"],
-                    "wht_tax_id": deduction["wht_tax_id"],
-                    "tax_base_amount": deduction["wht_amount_base"],
-                }
-            )
+            wht_vals = self._get_move_line_wht_vals(deduction, wht_move_lines)
+            line_vals_list.append(wht_vals)
         # Dr. Reconcilable Account (i.e., AP, Advance)
         # amount goes to AP first, then the rest go to Advance
         av_account = self.advance_sheet_id.expense_line_ids.mapped("account_id")
         ap_accounts = move_lines.mapped("account_id").filtered(
             lambda l: l.reconcile and l != av_account
         )
         accounts = ap_accounts + av_account
```

## Comparing `odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/METADATA` & `odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-l10n-th-account-tax-expense
-Version: 15.0.1.1.0
+Version: 15.0.1.1.1
 Summary: Thai Localization - Expense Tax
 Home-page: https://github.com/OCA/l10n-thailand
 Author: Ecosoft, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/RECORD` & `odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 odoo/addons/l10n_th_account_tax_expense/README.rst,sha256=Qji9gwAD5Kl9yYrHwUJ7TZ3zyPRLD6ysEf0qGFxhcuo,3296
 odoo/addons/l10n_th_account_tax_expense/__init__.py,sha256=zbDo82KGSfMZ6q_i8RJI2QZbEa3dij5sbr3CNrYTe0w,112
-odoo/addons/l10n_th_account_tax_expense/__manifest__.py,sha256=tCXwQd8bXnNknImoJaDtj0jk5F44yqD8oM3kNRRUlrE,713
+odoo/addons/l10n_th_account_tax_expense/__manifest__.py,sha256=xz_0BXbn8aLbw-VU1Xv_DDxaAPOQ4Mzfm_tsPVc9z24,713
 odoo/addons/l10n_th_account_tax_expense/i18n/l10n_th_account_tax_expense.pot,sha256=vZUXEM0fWGU1-qIfZBizqLtZANst7RVcMq3YDEzOH7A,3628
 odoo/addons/l10n_th_account_tax_expense/models/__init__.py,sha256=hHO2tCCbgomSTU-ux-xJIDzEMNKFpH4TfAMu1JnQhlA,153
 odoo/addons/l10n_th_account_tax_expense/models/account_move.py,sha256=WL_vOlte7r-q_vVi7mbJoU06WMpIWxf_yC-WR7fVxfQ,7246
-odoo/addons/l10n_th_account_tax_expense/models/hr_expense.py,sha256=qLgWBtlMjug9Qcmrw4W4hfyEBw-04nAuS_GZGMsEfic,1816
-odoo/addons/l10n_th_account_tax_expense/models/hr_expense_sheet.py,sha256=ti5n3qUhQoNIBy_2KLKf_vsNkcRqUX4D7V4x6ttbP_Y,5238
+odoo/addons/l10n_th_account_tax_expense/models/hr_expense.py,sha256=gzPjILex0QdrU9PqQJPMJ5clOQVM0pSuPsH95nB9UJM,1303
+odoo/addons/l10n_th_account_tax_expense/models/hr_expense_sheet.py,sha256=0UGXd7ODnYm8qcUGoycjgXax0Jn4RKFKyc_MkOs85Tc,5318
 odoo/addons/l10n_th_account_tax_expense/readme/CONTRIBUTORS.rst,sha256=lSZ5bCEBAH2jxGjly2A0_bhjufjRfYmVwaJGcXPh7O4,82
 odoo/addons/l10n_th_account_tax_expense/readme/DESCRIPTION.rst,sha256=ISKkR8l7r6HM3ajskTSRrvJxn8aYW1djuGC0xg2vtl8,361
 odoo/addons/l10n_th_account_tax_expense/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/l10n_th_account_tax_expense/static/description/index.html,sha256=n7nVLHKckUHyBvZUJ8HrNs3dG7hkwpOkotFNkZLvius,12575
 odoo/addons/l10n_th_account_tax_expense/tests/__init__.py,sha256=GBFNJvdLcGUU4Rrq1zZvXZ-2UMlK29TNmiQZOZhbQnw,152
 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_tax_invoice.py,sha256=2veGubqXuA9GC8a6JAiRutZEN13m3-yeVfYlGysW9mQ,3830
 odoo/addons/l10n_th_account_tax_expense/tests/test_expense_withholding_tax.py,sha256=whLdnWbmcHQeJ0q-X3iT8JZxru5mj6laqnGE9yBQYw8,9581
 odoo/addons/l10n_th_account_tax_expense/views/hr_expense_view.xml,sha256=JlcP5EKNM3NYPj9_DngFWV683CnWBEnKafY3sUr47-g,5199
 odoo/addons/l10n_th_account_tax_expense/wizard/__init__.py,sha256=HSskyCcYYKCo-iNG5dcWm_vuBFyXknhJ_bnc9wd6pdc,109
 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register.py,sha256=h5Dd8D2R7Rj3bQDKS3a661PCzK9ckQmWq3E_QVIGHbo,1283
 odoo/addons/l10n_th_account_tax_expense/wizard/account_payment_register_views.xml,sha256=2440WtEMqp9Xk_yfDWlq6prF9nY4UKDDKn4UJsO8Fl0,1009
-odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/METADATA,sha256=QMrqad8d5uhza7JlmYHq5xRT2IY0qz3kUWxHFqSCCus,4034
-odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_l10n_th_account_tax_expense-15.0.1.1.0.dist-info/RECORD,,
+odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/METADATA,sha256=Pg4WyMUsGyIW4lD7TTQBFNoY1LBGRVxfbrs_xGgWEjw,4034
+odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_l10n_th_account_tax_expense-15.0.1.1.1.dist-info/RECORD,,
```

